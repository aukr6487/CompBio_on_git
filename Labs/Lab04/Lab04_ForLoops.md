# Lab 04: For Loops## "for loops" and combining them with data collection via array indexing### ObjectivesThe main learning goals of this lab activity are to:  1.	Understand the basic idea of a "loop" in a program2.	Write your own loops with the "for" command3.	Use a loop to perform iterative (recursive) calculations of the type that are common in models of population biologySome broad (course-level, semester-long) learning goals that this exercise may relate to:1.	Be able to create and use data structures to store data from your own computer programs2.	Translate words into equations3.	Translate words and equations into working lines of computer code### Cheat Sheet of R commandsHere are some commands that you will likely want to use today.  Anything shown in italics here is a placeholder for something you provide.  Stuff that is not in italics must be written as shown (i.e., it is required syntax).Command, usage, and what it does`mySeq <- i:j`: create a sequence of integers from `i` to `j`.  Note that `i` and `j` represent actual integer numbers that would be defined previously in the code.`mySeq <- seq(i, j, stepSize)`: create a sequence of integers starting with integer `i` and ending with integer `j`, going in increments of `stepSize` .  Note that `i` and `j` represent actual integer numbers that would be defined previously in the code.`print(x)`: print the value stored in the variable `x` to the console`print("hi")`: print the phrase "hi" to the console.  Basic for loop syntax:```for( i in sequence ) { # note that "sequence" is some kind of vector    command1	    command2	    ...		}```	`data <- rep(0, n)`: create a vector of zeros as a place to store some data later.  This vector will have `n` entries (i.e., the vector has `0` repeated `n` times).  Note that `n` must be defined somewhere in the code prior to using it like this.`plot(time, data)`: make a standard x vs. y scatter-plot (e.g., `time` on the x-axis and `data` on the y-axis)`setwd("~/path/to/directory/")`: set working directory to be wherever you want it to be.  By default, RStudio starts in your home directory (i.e., `~`)`write.csv(x = myDataObject, file = "MyFileName.csv")`: save a .csv version of a myDataObject to the current working directory, in a file named `MyFileName.csv`### Instructions:  Write code in an R script containing solutions to each of the following problems.  Make sure comments indicate which question each piece of your code answers.   Do NOT copy and paste your code from one question to the next; type it fresh each time to reinforce the ideas for yourself.  Please keep in mind [best practices](https://github.com/flaxmans/CompBio_on_git/blob/master/CourseDocuments/BestPractices.md), especially regarding+ spacing+ variable names+ commenting+ NO magic numbers### Part I.  Practice writing “for loops”.1.	Write a “for loop” that prints the word “hi” to the console 10 times2.	Tim currently has $10 in his piggy bank.  Each week his parents give him an allowance of $5.  Each week he also buys 2 packs of gum.  If the packs of gum cost $1.34 each (with tax included), how much money will Tim have in total eight weeks from now?  Write a for loop that prints (to the console) his total amount of money each week for the next 8 weeks.3.	A conservation biologist estimates that, under current conditions, a population she is studying will shrink by 5% each year.  Suppose the current population size is 2000 individuals.  What is the expected population size each year for the next seven years?  Write a for loop that calculates it and prints each year’s size to the console.4.	Here is the discrete-time logistic growth equation, used in many models of population abundance over time:	`n[t] <- n[t-1] + ( r * n[t-1] * (K - n[t-1])/K )`	where `n[t]` is the abundance of the population at time `t`, `n[t – 1]` is the abundance of the population in the previous time step, `r` is the intrinsic growth rate of the population, and `K` is the environmental carrying capacity for the population.  Suppose that right now is time 1 (i.e., the current time step is `t = 1`).  **If `n[1] = 2500, K = 10000, and r = 0.8`, then what do you predict for the value of `n[12]`?**  Write a for loop that answers this question and that also prints out the abundance of the population each time step.### Part II.  Practice writing “for loops” AND practice storing the data produced by your loops in arrays.5.	Practice some basics of array indexing using for loops  	**5a.** Use the `rep` command to make a vector of 18 zeros (see Cheat Sheet above if you are unsure of the syntax to use).  If you do this correctly, your vector should look like this when displayed in the RStudio console.	`[1] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0`	**5b.** Suppose you write a for loop that looks something like this:   `for ( i in seq(1,18) ) { ... }`  This is a loop that is iterated 18 times.  Replace the "`...`" with code that will make the loop store 3 times the ith value of the iterator variable (i) in the ith spot of the vector you created in part a.  If you do this correctly, your vector should now look like this in the console:	`[1]  3  6  9 12 15 18 21 24 27 30 33 36 39 42 45 48 51 54`	**5c.** Repeat part a to make a new vector of zeros.  Then, make the first entry of that vector have a value of 1.  If you do this correctly, your vector should look like this in the console:	`[1] 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0`		**5d.** Write a for loop so that starting with the second entry of the vector created in part c, the value stored in that position in the vector is equal to one plus twice the value of the previous entry (i.e., 1 + (2 * previous entry) ).  If you do this correctly, your vector should look like this when you are done:  	`[1] 1 3  7  15  31  63  127  255  511  1023  2047  4095 8191 16383  32767  65535  131071  262143`6.	One of the most famous sequences of numbers in all of mathematics is the "Fibonacci sequence." According to [Wikipedia](https://en.wikipedia.org/wiki/Fibonacci_number) (https://en.wikipedia.org/wiki/Fibonacci_number, accessed Feb. 2017):    >the Fibonacci numbers are the numbers in the following integer sequence, called the Fibonacci sequence, and characterized by the fact that every number after the first two is the sum of the two preceding ones:1 , 1 , 2 , 3 , 5 , 8 , 13 , 21 , 34 , 55 , 89 , 144 , ...  Often, especially in modern usage, the sequence is extended by one more initial term:  0 , 1 , 1 , 2 , 3 , 5 , 8 , 13 , 21 , 34 , 55 , 89 , 144 , ...  By definition, the first two numbers in the Fibonacci sequence are either 1 and 1, or 0 and 1, depending on the chosen starting point of the sequence, and each subsequent number is the sum of the previous two.Using the information given in that quote (and using a for loop), write code that makes a vector of the first 20 Fibonacci numbers, where the first number is 0 (zero).7.	Redo question 4 from part I above, but now store all the data.  (If you did that already as part of your work above, just note that in a comment.)  Make two vectors, one called "time" that stores the time steps (1 to 12), and one called "abundance" that stores the data on population abundances predicted from the discrete-time logistic equation.  Then, make a plot of the results (i.e., `plot(time, abundance)`).  <hr>### Part III. Optional challenge problems (not required for full credit, but encouraged; a few bonus points may be awarded for really nice work)8.  Obtain the data and metadata files in the Lab04 folder on Sam's Github site for the course.  The data file is "CO2_data_cut_paste.csv", and the meta-data file is "MetaData_CO2_emissions.txt".  **Copy both of these files into your directory for lab04 in your own repo.**  **Read through the meta data first** to understand what the data file is.  Then, do the following:  	    **8a**.  Read the data into RStudio (hints: (1) You will need to set the working directory using `setwd()` or specify the full file path. (2) Use `read.csv()`)              **8b**.  One of difficulties with these data is that R imports each column of data as an "integer" rather than a "numeric" data type.  That's fine for the first column, which is the year.   That means one can't use the data for accurate calculations, because integer math treats values as categorical (only integers) rather than continuous.  The data need to be converted to be "numeric" rather than "integer".  One might be tempted to try the following in a situation like this:        ```        mydata <- as.numeric(mydata)        ```            However, if you try that, you'll get an error message:        ```        Error: (list) object cannot be coerced to type 'double'        ```        There are at least two reasonable ways to solve this problem.         (i) You can figure out the *option* that can be used in `read.csv()` to force it to import everything but the year as type `numeric` (the year should be an integer).          (ii) You could use a `for` loop, iterating on the variables/columns of the data frame, to change each variable/column (except the year) one by one (i.e., `as.numeric()` can be used on vectors, but not on whole data frames).            A third way would be to change the variables/columns one-by-one with seven lines of code, but that would NOT be elegant.          For practice, figure out how to do BOTH of the elegant ways and demonstrate both in your script.         (NOTE: Newer versions of R appear to automatically convert ints to nums when you do SOME kinds of mathematical operations with them, but this is still a good exercise even if your version does the correct conversions for you.  It's always a good idea to be conscious of your data types!)            **8c**. For each of the quantities in the data frame you just imported, except for the `Year`, calculate the *percent change* from year `i-1` to year `i` across all years.  Your results should be stored in a new data frame or matrix.  Your new object should have the same headers/column names as the imported data.  There are again two reasonable ways to do this.  One involves making use of R's ability to do element-by-element operations on data.  The other involves nested for loops, i.e., one for loop inside another.  Demonstrate BOTH methods in your code.  Do a test to check that the two methods produced identical results.  Note that, for testing for identical results, you will have to deal with `NA`'s somehow...	    **8d**.  Use `write.csv()` to save your new data frame to a file. The file should be named "YearlyPercentChangesInCO2.csv", and it should be in your Lab04 folder              **8e.**  Revisit step 8c, but for each year, calculate the percent change *from the first year for which there is non-zero data*.  Note: use code to figure out when that "first year" is (no "magic" numbers!).  It may be different for each column in the imported data, since data were not present (or were not > 0) for some of the earlier years.  Write your calculations to a new csv file with an appropriate name. In this case there is no need to use two methods -- just present a single method that works.<hr>#### Complete all of the above in an R script file (with good comments on all steps) and push that file to your GitHub repo for this class.  Turning in WORKING and COMMENTED code counts as the bulk of [Assignment 04](https://github.com/flaxmans/CompBio_on_git/blob/master/Assignments/04_TasksForWeek4.md).  Please see that assignment for the due date. 